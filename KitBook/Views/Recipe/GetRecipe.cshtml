@model KitBook.Models.ViewModels.RecipeViewModel

@{
    ViewData["Title"] = Model.Title;
}

<h1 class="text-center"><a target="_blank" rel="noreferrer" href="@Model.SourceURL">@Model.Title.Trim()</a></h1>
<br />
@if (Model.Thumbnail != null)
{
<div class="text-center">
    @{
        await Html.RenderPartialAsync("_ImagePartial", Model.Thumbnail);
    }
</div>
}
else
{
    <footer class="text-center"><em><small class="text-muted">Здесь могла быть обложка рецепта</small></em></footer>
}
<br />

<p class="lead">
    @Model.Description
</p>
<br />
<p class="font-weight-light">
    Готовится <strong>@Model.CookingTimeMinutes</strong> минут в @Model.Stages?.Count этапа
</p>

<div>
    @if (Model.Stages?.Count > 0)
    {
        <p>
            Последовательность:
        </p>
        @for (int i = 0; i < Model.Stages.Count; i++)
        {
            if (Model.Stages[i].Image != null)
            {
                <div class="row">
                    <div class="col-2">
                        @{
                            await Html.RenderPartialAsync("_ImagePartial", Model.Stages[i].Image);
                        }
                    </div>
                    <div class="col-8 text-center">
                        <p>
                            @Model.Stages[i].Index. @Model.Stages[i].Description
                        </p>
                    </div>
                </div>
            }
            else
            {
                <p>
                    @Model.Stages[i].Index. @Model.Stages[i].Description
                </p>
            }
        }
    }
</div>
<div>
    @if (Model.Ingredients?.Count > 0)
    {
        <dl>
            @for (int i = 0; i < Model.Ingredients.Count; i++)
            {
                <dt class="col-sm-2">
                    @Model.Ingredients[i].IngredientName
                </dt>
                @if (Model.Ingredients[i].Ml != null)
                {

                    <dd class="col-sm-10">
                        @Model.Ingredients[i].Ml МЛ
                    </dd>
                }
                else if (Model.Ingredients[i].G != null)
                {
                    <dd class="col-sm-10">
                        @Model.Ingredients[i].G грамм
                    </dd>
                }
                else
                {
                    <dd class="col-sm-10">
                        @Model.Ingredients[i].Amount штук
                    </dd>
                }
            }
        </dl>
    }
</div>
<div>
    <a asp-action="PutRecipe" asp-route-id="@Model.Id">Редактировать</a> |
    <a asp-action="GetRecipes">К списку</a> |
    <a asp-controller="Home" asp-action="Index">На главную</a>
</div>
