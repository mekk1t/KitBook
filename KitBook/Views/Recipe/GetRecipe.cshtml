@model KitBook.Models.DTO.RecipeDto

@{
    ViewData["Title"] = Model.Title;
}

<h1 class="text-center"><a target="_blank" rel="noreferrer" href="@Model.SourceURL">@Model.Title.Trim()</a></h1>

@if (Model.ThumbnailBase64 != null)
{
    <img class="img-fluid" src="data:image/png;base64,@Model.ThumbnailBase64" />
}
else
{
    <footer class="text-center"><em><small class="text-muted">Здесь могла быть обложка рецепта</small></em></footer>
}

<p class="lead">
    @Model.Description
</p>
<br />
<p class="font-weight-light">
    Готовится <strong>@Model.CookingTimeMinutes</strong> минут в @Model.Stages?.Count этапа
</p>

<div>
    @if (Model.Stages?.Count > 0)
    {
        <p>
            Последовательность:
        </p>
        @for (int i = 0; i < Model.Stages.Count; i++)
        {
            if (Model.Stages[i].ImageBase64 != null)
            {
                <div class="row">
                <figure class="figure">
                    <img class="figure-img img-fluid rounded" src="data:image/png;base64,@Model.Stages[i].ImageBase64" />
                    <figcaption class="figure-caption">
                        @Model.Stages[i].Description
                    </figcaption>
                </figure>
                </div>
            }
            else
            {
                <p>
                    @Model.Stages[i].Index. @Model.Stages[i].Description
                </p>
            }
        }
    }
</div>
<div>
    @if (Model.Ingredients?.Count > 0)
    {
        <dl>
            @for (int i = 0; i < Model.Ingredients.Count; i++)
            {
                <dt class="col-sm-2">
                    @Model.Ingredients[i].Name
                </dt>
                @if (Model.Ingredients[i].Ml != null)
                {

                    <dd class="col-sm-10">
                        @Model.Ingredients[i].Ml МЛ
                    </dd>
                }
                else if (Model.Ingredients[i].G != null)
                {
                    <dd class="col-sm-10">
                        @Model.Ingredients[i].G грамм
                    </dd>
                }
                else
                {
                    <dd class="col-sm-10">
                        @Model.Ingredients[i].Amount штук
                    </dd>
                }
            }
        </dl>
    }
</div>
<div>
    <a asp-action="PutRecipe" asp-route-id="@Model.Id">Редактировать</a> |
    <a asp-action="GetRecipes">К списку</a> |
    <a asp-controller="Home" asp-action="Index">На главную</a>
</div>
